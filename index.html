<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="shortcut icon" href="icon/human-handsup.svg" type="image/svg" />
    <title>Celebrate</title>
    <link rel="stylesheet" href="style.css" />
    <link
      href="https://fonts.googleapis.com/css?family=Press+Start+2P"
      rel="stylesheet"
    />
    <script
      src="https://kit.fontawesome.com/a84cd75bfe.js"
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <audio id="ta-da-audio">
      <source src="audio/ta-da.mp3" type="audio/mpeg" />
    </audio>
    <input type="checkbox" name="mute-sound" id="mute-checkbox" hidden />
    <button id="mute-button" onclick="toggleMute()">
      <i class="fa-solid fa-volume-high"></i>
    </button>
    <section>
      <div id="quote">Celebrate every win,<br />no matter how small.</div>
      <div>
        <button id="celebrate-button" onclick="celebrate()">Celebrate</button>
      </div>
      <div></div>
    </section>
    <footer>
      <div id="made-by">
        <a href="http://github.com/johanvilela/celebrate" target="_blank">
          <i class="fa-brands fa-square-github"></i> Made by Johan Vilela
        </a>
      </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/js-confetti@latest/dist/js-confetti.browser.js"></script>
    <script>
      const mutedState = localStorage.getItem("muted-state");
      if (mutedState === "false") {
        toggleMute();
      }
      function playTaDa() {
        const taDaAudio = document.getElementById("ta-da-audio");
        taDaAudio.play();
      }

      const jsConfetti = new JSConfetti();

      function showConfetti() {
        jsConfetti.addConfetti();
      }

      function celebrate() {
        playTaDa();
        showConfetti();
      }

      function toggleMute() {
        const muteCheckbox = document.getElementById("mute-checkbox");
        const isMuted = muteCheckbox.checked;
        muteCheckbox.checked = !muteCheckbox.checked;
        localStorage.setItem("muted-state", !muteCheckbox.checked);
        document.getElementById("ta-da-audio").muted = muteCheckbox.checked;
        if (isMuted) {
          document.getElementById(
            "mute-button"
          ).innerHTML = `<i class="fa-solid fa-volume-high"></i>`;
        } else {
          document.getElementById(
            "mute-button"
          ).innerHTML = `<i class="fa-solid fa-volume-xmark"></i>`;
        }
      }
    </script>
  </body>
</html>
